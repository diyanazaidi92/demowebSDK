<!DOCTYPE html>
<html>
<title>Donegal</title>

<head>
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
  <meta content="utf-8" http-equiv="encoding" />
  <link rel="stylesheet" href="../styles.css" />
  <script type="text/javascript" src="../utils.js"></script>
  
<script>
(function(e,t,n,o){e.PeopleEventsObject=o;e[o]=e[o]||{init:function(t){e[o].apiKey=t},
setPerson:function(t,n){e[o].person=t;e[o].personTtl=n},
forgetPerson:function(){e[o].toForgetPerson=true},
track:function(){(e[o].q=e[o].q||[]).push(arguments)},
updatePerson:function(t){e[o].personToUpdate={person:t}},
appendToList:function(t,n){e[o].attributeToAppend={attributeName:t,attribute:n}}};
var r=t.createElement("script");
var s=t.getElementsByTagName("script")[0];r.async=1;r.src=n;s.parentNode.insertBefore(r,s)})
(window,document,'https://s3.eu-central-1.amazonaws.com/portal-cdn-production/people-events-sdk/pe.latest-2.js','pe');

pe.init('8dbf14630365928c5cdd672534a9f29a-0a769b9b-dc7d-453e-b98d-8feb964a1bb6');
</script>
  
</head>

<body>
  
  <header class="header">
    <div class="fake-counter"></div>
    <a class="delink" href="../">
      <h1>Magic shop</h1>
    </a>
    <div class="counter">
      <a class="delink" id="cart" href="../checkout.html"></a>
    </div>
  </header>
  <article class="product-content">
    <div class="product-image-container"><img class="product-image" src="../images/hat03.jpg" alt="donegal" /></div>
    <div class="product-details">
      <div class="product-name">Donegal</div>
      <div class="product-price">$33</div>
      <div class="product-description">100% Donegal Tweed. The Campden Baker-boy is hewn in delightful shades of
        sumptuous but tough Donegal Tweed. The excellent quality extends throughout the cap to the exceptional purple
        satin lining.</div>
      <button class="product-button-add" type="button" onclick="addToCart('donegal', 3)">
        Add to cart
      </button>
    </div>
  </article>
   <script>
    const user = getUser();
    if (user && user.email) {
         window.dataLayer.push({'user_id': user.email, 'event': 'login'});
     }

    window.dataLayer.push({'product_name': 'Donegal', 'event': 'product_view'});
     
    updateCartView('cart');

    function addToCart(itemName, price) {
      addItemToCart(itemName, price);
      updateCartView('cart');
      window.dataLayer.push({'product_name': itemName, 'product_price': price, 'qty': 1, 'event': 'add_to_cart'});
      console.log('Item Added to Cart');
    }
  </script>
</body>

</html>
